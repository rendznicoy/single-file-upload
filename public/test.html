<!DOCTYPE html>
<html>

<head>
    <title>Upload Test</title>
</head>

<body>
    <h1>Simple Upload Test</h1>

    <!-- Test server connectivity -->
    <button onclick="testServer()">Test Server Connection</button>
    <div id="serverTest"></div>

    <br><br>

    <!-- Simple upload form -->
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required>
        <button type="submit">Upload File</button>
    </form>

    <br>

    <!-- View files -->
    <button onclick="viewFiles()">View Files</button>
    <div id="fileList"></div>

    <script>
        function testServer() {
            fetch('/test')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('serverTest').innerHTML =
                        '<p style="color: green;">✅ Server is responding: ' + data.message + '</p>';
                })
                .catch(error => {
                    document.getElementById('serverTest').innerHTML =
                        '<p style="color: red;">❌ Server error: ' + error.message + '</p>';
                });
        }

        function viewFiles() {
            fetch('/view')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('fileList').innerHTML =
                        '<p>Files: ' + JSON.stringify(data.files) + '</p>';
                })
                .catch(error => {
                    document.getElementById('fileList').innerHTML =
                        '<p style="color: red;">Error: ' + error.message + '</p>';
                });
        }
    </script>
</body>

</html>